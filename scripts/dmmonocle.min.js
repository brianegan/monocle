/**************************************
 *
 *	dmMonocle 1.01
 *	by Brian Egan
 *	
 *	Copyright (c) 2009 Board of Regents of the Nevada System of Higher Education, on behalf, of the University of Nevada, Las Vegas
 *	Licensed under MIT License 
 *  http://code.google.com/p/dmmonocle/wiki/License
 *	
*****************************************************************/
function dmMonocle(h,P,n,O){var k=0,J=$("#dmMonocle").width(),X=$("#dmMonocle").height(),g="",ab=h,U=P,a=n,I=O,p,F,M=120,Y=120,W,e,R,r,q,S,N=false,t=[],Z=[],aa=[],C=[],c=0,ag,af,H,ah,u,ac,B,v,s,ak,aj=J/ab,L=X/U,f,m;if(aj>=L){f=L;minZoomLevel=L;}else{f=aj;minZoomLevel=aj;}function o(aq,an,am,al){if($("#dmMonocleMenu").length>0){}else{A(aq,an);}$("#dmMonocle div").remove();$("#dmThumbnail div").remove();$("#dmMainImage div").remove();$("#dmThumbnail").remove();$("#dmMainImageContainer").remove();$("#dmMainImage").remove();clearTimeout(S);if(N===true){$('<div id="dmThumbnail"></div>').appendTo("#dmMonocle").css("top",((Y+10)*-1)+"px");}else{$('<div id="dmThumbnail" style="left:0; top:0"></div>').appendTo("#dmMonocle");}$('<div id="dmMainImageContainer"></div>').appendTo("#dmMonocle");$('<div id="dmMainImage"></div>').appendTo("#dmMainImageContainer");if(an===0){bigImageWidth=ab;bigImageHeight=U;}else{if(an===90){bigImageWidth=U;bigImageHeight=ab;}else{if(an===180){bigImageWidth=ab;bigImageHeight=U;}else{if(an===270){bigImageWidth=U;bigImageHeight=ab;}}}}dmWidth=ab*aq;dmHeight=U*aq;imageWidth=bigImageWidth*aq;imageHeight=bigImageHeight*aq;imageOffsetX=imageWidth*am-(J/2);imageOffsetY=imageHeight*al-(X/2);if(imageOffsetX<0){imageOffsetX=0;}else{if(imageOffsetX+J>imageWidth){imageOffsetX=imageWidth-J;}}if(imageOffsetY<0){imageOffsetY=0;}else{if(imageOffsetY+X>imageHeight){imageOffsetY=imageHeight-X;}}if(imageHeight>imageWidth){var ap=Y/(imageHeight/aq);F=ap*(imageHeight/aq);p=ap*(imageWidth/aq);}else{if(imageHeight<imageWidth){ap=M/(imageWidth/aq);F=ap*(imageHeight/aq);p=ap*(imageWidth/aq);}else{if(imageHeight==imageWidth){ap=Y/(imageHeight/aq);F=ap*(imageHeight/aq);p=ap*(imageWidth/aq);}}}var at=ap*100;var ar=new Image();var ao=g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+at+"&DMWIDTH="+M+"&DMHEIGHT="+Y+"&DMROTATE="+an;if(imageWidth<=J&&imageHeight<=X){$(ar).load(function(){$("#dmThumbnail").append(this);p=$(this).width();F=$(this).height();$("#dmThumbnail").width(p).height(F);mainImageBG="url("+g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+(aq*100)+"&DMWIDTH="+dmWidth+"&DMHEIGHT="+dmHeight+"&DMROTATE="+an+")";$("#dmMainImage").width(J).height(X);$("#dmMainImageContainer").width(J).height(imageHeight);$("#dmMainImage").css("position","relative").css("margin","0 auto").css("background-image",mainImageBG).css("background-position","center center").css("background-repeat","no-repeat").addClass("dmNoDrag");$('<div class="dmNavigator"></div>').appendTo("#dmThumbnail").width(p).height(F).css("z-index","20").addClass("dmNoDrag");j();}).attr("class","thumbImage").attr("src",ao);}else{if(imageWidth<=J&&imageHeight>=X){$(ar).load(function(){$("#dmThumbnail").append(this);p=$(this).width();F=$(this).height();$("#dmThumbnail").width(p).height(F);var aw='<div class="dmClickNavLayer" style="width:'+p+"px; height:"+F+'px;"></div>';$(aw).appendTo("#dmThumbnail");mainImageBG="url("+g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+(aq*100)+"&DMWIDTH="+dmWidth+"&DMHEIGHT="+dmHeight+"&DMROTATE="+an+")";$("#dmMainImage").width(J).height(imageHeight);var az=($("#dmMainImage").width()+$("#dmMainImage").width()-J)+"px";var ay=($("#dmMainImage").height()+$("#dmMainImage").height()-X)+"px";var av="-"+($("#dmMainImage").width()-J)+"px";var au="-"+($("#dmMainImage").height()-X)+"px";var aA=($("#dmMainImage").width()-J)+"px";var ax=($("#dmMainImage").height()-X-imageOffsetY)+"px";B=(J-J);v=(imageHeight-X);s=$("#dmThumbnail img").width()/$("#dmMainImage").width();ak=$("#dmThumbnail img").height()/$("#dmMainImage").height();$("#dmMainImageContainer").css("position","absolute").css("width",az).css("height",ay).css("left",av).css("top",au);$("#dmMainImage").css("position","absolute").css("left",aA).css("top",ax).css("background-image",mainImageBG).css("background-position","center top").css("background-repeat","no-repeat").toggleClass("dmHover").bind("dragstart",function(){$(this).toggleClass("dmDragging");}).bind("drag",function(aB){G(aB);}).bind("dragend",function(){$(this).toggleClass("dmDragging");j();}).bind("dblclick",function(aC){var aB=0;var aD=0;if(!aC){var aC=window.event;}if(aC.pageX||aC.pageY){aB=aC.pageX;aD=aC.pageY;}else{if(aC.clientX||aC.clientY){aB=aC.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;aD=aC.clientY+document.body.scrollTop+document.documentElement.scrollTop;}}D(aB,aD);});Q(am,al);}).attr("class","thumbImage").attr("src",ao);}else{if(imageWidth>=J&&imageHeight<=X){$(ar).load(function(){$("#dmThumbnail").append(this);p=$(this).width();F=$(this).height();$("#dmThumbnail").width(p).height(F);var aw='<div class="dmClickNavLayer" style="width:'+p+"px; height:"+F+'px;"></div>';$(aw).appendTo("#dmThumbnail");mainImageBG="url("+g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+(aq*100)+"&DMWIDTH="+dmWidth+"&DMHEIGHT="+dmHeight+"&DMROTATE="+an+")";$("#dmMainImage").width(imageWidth).height(X);u=($("#dmMainImage").width()+$("#dmMainImage").width()-J)+"px";ac=($("#dmMainImage").height()+$("#dmMainImage").height()-X)+"px";s=$("#dmThumbnail img").width()/$("#dmMainImage").width();ak=$("#dmThumbnail img").height()/$("#dmMainImage").height();var av="-"+($("#dmMainImage").width()-J)+"px";var au="-"+($("#dmMainImage").height()-X)+"px";var ay=($("#dmMainImage").width()-J-imageOffsetX)+"px";var ax=($("#dmMainImage").height()-X)+"px";B=(imageWidth-J);v=(X-X);$("#dmMainImageContainer").css("position","absolute").css("width",u).css("height",ac).css("left",av).css("top",au);$("#dmMainImage").css("position","absolute").css("left",ay).css("top",ax).css("background-image",mainImageBG).css("background-position","left center").css("background-repeat","no-repeat").bind("dragstart",function(){$(this).toggleClass("dmDragging");}).bind("drag",function(az){G(az);}).bind("dragend",function(){$(this).toggleClass("dmDragging");j();}).bind("dblclick",function(aA){var az=0;var aB=0;if(!aA){var aA=window.event;}if(aA.pageX||aA.pageY){az=aA.pageX;aB=aA.pageY;}else{if(aA.clientX||aA.clientY){az=aA.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;aB=aA.clientY+document.body.scrollTop+document.documentElement.scrollTop;}}D(az,aB);});Q(am,al);}).attr("class","thumbImage").attr("src",ao);}else{if(imageWidth<2000||imageHeight<2000){W=400;e=400;}else{if(imageWidth>=2000&&imageWidth<3000||imageHeight>=2000&&imageHeight<3000){W=400;e=400;}else{if(imageWidth>=3000&&imageWidth<4000||imageHeight>=3000&&imageHeight<4000){W=500;e=500;}else{if(imageWidth>=4000&&imageWidth<5000||imageHeight>=4000&&imageHeight<5000){W=500;e=500;}else{if(imageWidth>=5000&&imageWidth<6000||imageHeight>=5000&&imageHeight<6000){W=600;e=600;}else{if(imageWidth>=6000&&imageWidth<7000||imageHeight>=6000&&imageHeight<7000){W=700;e=700;}else{if(imageWidth>=7000&&imageWidth<8000||imageHeight>=7000&&imageHeight<8000){W=800;e=800;}else{if(imageWidth>=8000||imageHeight>=8000){W=800;e=800;}}}}}}}}$("#dmMainImage").width(imageWidth).height(imageHeight).css("background-color","#EEE").css("position","absolute").css("background-image","none");$(ar).load(function(){$("#dmThumbnail").append(this);p=$(this).width();F=$(this).height();$("#dmThumbnail").width(p).height(F);var aV='<div class="dmClickNavLayer" style="width:'+p+"px; height:"+F+'px;"></div>';$(aV).appendTo("#dmThumbnail");var az=imageWidth/W;var aF=imageHeight/e;var aW=Math.ceil(az);var aN=Math.ceil(aF);var aD=p/imageWidth;var au=F/imageHeight;if(an===0){for(y=0;y<aN;y++){for(x=0;x<aW;x++){var aE=W*x;var aB=e*y;var aL=aE*aD;var aK=aB*au;var aP=az.toString().split(".");var aA="."+aP[1];var aC=aA*aD;var aS=aF.toString().split(".");var aM="."+aS[1];var aU=aM*au;if((aW-1)-x===0){bigTileOutputWidth=Math.floor(W*aA);smallTileOutputWidth=bigTileOutputWidth*aD;}else{bigTileOutputWidth=W;smallTileOutputWidth=bigTileOutputWidth*aD;}if((aN-1)-y===0){bigTileOutputHeight=Math.floor(e*aM);smallTileOutputHeight=bigTileOutputHeight*au;}else{bigTileOutputHeight=e;smallTileOutputHeight=bigTileOutputHeight*au;}x2=aE+bigTileOutputWidth;y2=aB+bigTileOutputHeight;var aO=aq*100;var aT='<div class="tile-'+c+'" style="position: absolute; : 5; width: '+bigTileOutputWidth+"px; height: "+bigTileOutputHeight+"px; left: "+aE+"px; top: "+aB+'px; font-family: Arial; "></div>';$(aT).appendTo("#dmMainImage");var ay='<div class="'+c+'" style="position: absolute; : 5; width: '+smallTileOutputWidth+"px; height: "+smallTileOutputHeight+"px; left: "+aL+"px; top: "+aK+'px; font-family: Arial; "></div>';$(ay).appendTo("#dmThumbnail").addClass("collision");t[c]=g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+aO+"&DMWIDTH="+(W+1)+"&DMHEIGHT="+(e+1)+"&DMROTATE="+an+"&DMX="+aE+"&DMY="+aB+"&DMCROP="+aE+","+aB+","+x2+","+y2;Z[c]=g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+aO+"&DMWIDTH="+W+"&DMHEIGHT="+e+"&DMROTATE="+an+"&DMX="+aE+"&DMY="+aB+"&DMCROP="+aE+","+aB+","+x2+","+y2;aa[c]=bigTileOutputWidth;C[c]=bigTileOutputHeight;c++;}}}else{if(an==90){for(x=0;x<aW;x++){for(y=aN-1;y>=0;y--){aP=az.toString().split(".");aA="."+aP[1];aC=aA*aD;aS=aF.toString().split(".");aM="."+aS[1];aU=aM*au;if((aW-1)-x===0){bigTileOutputWidth=Math.floor(W*aA);bigImageOutputWidth=Math.floor(W*aA);smallTileOutputWidth=bigTileOutputWidth*aD;}else{bigTileOutputWidth=W;bigImageOutputWidth=W;smallTileOutputWidth=bigTileOutputWidth*aD;}if((aN-1)-y==(aN-1)){bigTileOutputHeight=Math.floor(e*aM);bigImageOutputHeight=Math.floor(e*aM);smallTileOutputHeight=bigTileOutputHeight*au;aB=e*y;}else{bigTileOutputHeight=e;bigImageOutputHeight=e;smallTileOutputHeight=bigTileOutputHeight*au;var ax=Math.floor(e*aM);aB=(e*y)-(e-ax);}aE=W*x;var aR=W*-(y-(aN-1));var aQ=e*x;aL=aE*aD;aK=aB*au;x2=aR+bigImageOutputHeight;y2=aQ+bigImageOutputWidth;aO=aq*100;aT='<div class="tile-'+c+'" style="position: absolute; : 5; width: '+bigTileOutputWidth+"px; height: "+bigTileOutputHeight+"px; left: "+aE+"px; top: "+aB+'px; font-family: Arial; "></div>';$(aT).appendTo("#dmMainImage");ay='<div class="'+c+'" style="position: absolute; : 5; width: '+smallTileOutputWidth+"px; height: "+smallTileOutputHeight+"px; left: "+aL+"px; top: "+aK+'px; font-family: Arial; "></div>';$(ay).appendTo("#dmThumbnail").addClass("collision");t[c]=g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+aO+"&DMWIDTH="+W+"&DMHEIGHT="+e+"&DMROTATE="+an+"&DMX="+aR+"&DMY="+aQ+"&DMCROP="+aR+","+aQ+","+x2+","+y2;aa[c]=bigTileOutputWidth;C[c]=bigTileOutputHeight;c++;}}}else{if(an==180){for(y=aN-1;y>=0;y--){for(x=aW-1;x>=0;x--){aP=az.toString().split(".");aA="."+aP[1];aC=aA*aD;aS=aF.toString().split(".");aM="."+aS[1];aU=aM*au;if((aW-1)-x==(aW-1)){bigTileOutputWidth=Math.floor(W*aA);bigImageOutputWidth=Math.floor(W*aA);smallTileOutputWidth=bigTileOutputWidth*aD;aE=W*x;}else{bigTileOutputWidth=W;bigImageOutputWidth=W;smallTileOutputWidth=bigTileOutputWidth*aD;var aI=Math.floor(W*aA);aE=(W*x)-(W-aI);}if((aN-1)-y==(aN-1)){bigTileOutputHeight=Math.floor(e*aM);bigImageOutputHeight=Math.floor(e*aM);smallTileOutputHeight=bigTileOutputHeight*au;aB=e*y;}else{bigTileOutputHeight=e;bigImageOutputHeight=e;smallTileOutputHeight=bigTileOutputHeight*au;var aG=Math.floor(e*aM);aB=(e*y)-(e-aG);}aR=W*-(x-(aW-1));aQ=e*-(y-(aN-1));aL=aE*aD;aK=aB*au;x2=aR+bigImageOutputWidth;y2=aQ+bigImageOutputHeight;aO=aq*100;aT='<div class="tile-'+c+'" style="position: absolute; : 5; width: '+bigTileOutputWidth+"px; height: "+bigTileOutputHeight+"px; left: "+aE+"px; top: "+aB+'px; font-family: Arial; "></div>';$(aT).appendTo("#dmMainImage");ay='<div class="'+c+'" style="position: absolute; : 5; width: '+smallTileOutputWidth+"px; height: "+smallTileOutputHeight+"px; left: "+aL+"px; top: "+aK+'px; font-family: Arial; "></div>';$(ay).appendTo("#dmThumbnail").addClass("collision");t[c]=g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+aO+"&DMWIDTH="+W+"&DMHEIGHT="+e+"&DMROTATE="+an+"&DMX="+aR+"&DMY="+aQ+"&DMCROP="+aR+","+aQ+","+x2+","+y2;Z[c]=g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+aO+"&DMWIDTH="+W+"&DMHEIGHT="+e+"&DMROTATE="+an+"&DMX="+aR+"&DMY="+aQ+"&DMCROP="+aR+","+aQ+","+x2+","+y2;aa[c]=bigTileOutputWidth;C[c]=bigTileOutputHeight;c++;}}}else{if(an==270){for(x=aW-1;x>=0;x--){for(y=0;y<aN;y++){aP=az.toString().split(".");aA="."+aP[1];aC=aA*aD;aS=aF.toString().split(".");aM="."+aS[1];aU=aM*au;if((aW-1)-x==(aW-1)){bigTileOutputWidth=Math.floor(W*aA);bigImageOutputWidth=Math.floor(W*aA);smallTileOutputWidth=bigTileOutputWidth*aD;aE=W*x;}else{bigTileOutputWidth=W;bigImageOutputWidth=W;smallTileOutputWidth=bigTileOutputWidth*aD;aI=Math.floor(W*aA);aE=(W*x)-(W-aI);}if((aN-1)-y===0){bigTileOutputHeight=Math.floor(e*aM);bigImageOutputHeight=Math.floor(e*aM);smallTileOutputHeight=bigTileOutputHeight*au;}else{bigTileOutputHeight=e;bigImageOutputHeight=e;smallTileOutputHeight=bigTileOutputHeight*au;}aB=e*y;aR=W*y;aQ=e*-(x-(aW-1));aL=aE*aD;aK=aB*au;x2=aR+bigImageOutputHeight;y2=aQ+bigImageOutputWidth;aO=aq*100;aT='<div class="tile-'+c+'" style="position: absolute; : 5; width: '+bigTileOutputWidth+"px; height: "+bigTileOutputHeight+"px; left: "+aE+"px; top: "+aB+'px; font-family: Arial; "></div>';$(aT).appendTo("#dmMainImage");ay='<div class="'+c+'" style="position: absolute; : 5; width: '+smallTileOutputWidth+"px; height: "+smallTileOutputHeight+"px; left: "+aL+"px; top: "+aK+'px; font-family: Arial; "></div>';$(ay).appendTo("#dmThumbnail").addClass("collision");t[c]=g+"/cgi-bin/getimage.exe?CISOROOT="+I+"&CISOPTR="+a+"&DMSCALE="+aO+"&DMWIDTH="+W+"&DMHEIGHT="+e+"&DMROTATE="+an+"&DMX="+aR+"&DMY="+aQ+"&DMCROP="+aR+","+aQ+","+x2+","+y2;aa[c]=bigTileOutputWidth;C[c]=bigTileOutputHeight;c++;}}}}}}u=parseInt(((imageWidth)+(imageWidth)-J),10)+"px";ac=($("#dmMainImage").height()+$("#dmMainImage").height()-X)+"px";var aw="-"+($("#dmMainImage").width()-J)+"px";var av="-"+($("#dmMainImage").height()-X)+"px";var aJ=($("#dmMainImage").width()-J-imageOffsetX)+"px";var aH=($("#dmMainImage").height()-X-imageOffsetY)+"px";$("#dmMainImageContainer").css("position","absolute").css("width",u).css("height",ac).css("left",aw).css("top",av);B=(imageWidth-J);v=(imageHeight-X);ag=$("#dmMainImageContainer").offset().left;af=$("#dmMainImageContainer").offset().top;H=$("#dmMainImage").width();ah=$("#dmMainImage").height();s=$("#dmThumbnail img").width()/$("#dmMainImage").width();ak=$("#dmThumbnail img").height()/$("#dmMainImage").height();$("#dmMainImage").css("position","absolute").css("left",aJ).css("top",aH).bind("dragstart",function(){$(this).toggleClass("dmDragging");}).bind("drag",function(aX){G(aX);}).bind("dragend",function(){$(this).toggleClass("dmDragging");j();}).bind("dblclick",function(aY){var aX=0;var aZ=0;if(!aY){var aY=window.event;}if(aY.pageX||aY.pageY){aX=aY.pageX;aZ=aY.pageY;}else{if(aY.clientX||aY.clientY){aX=aY.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;aZ=aY.clientY+document.body.scrollTop+document.documentElement.scrollTop;}}D(aX,aZ);});Q(am,al);}).attr("class","thumbImage").attr("src",ao);}}}}function Q(am,al){var an=(($("#dmThumbnail img").width()/$("#dmMainImage").width())*J);var ao=(($("#dmThumbnail img").height()/$("#dmMainImage").height())*X);if(an>$("#dmThumbnail img").width()){an=$("#dmThumbnail img").width();}if(ao>$("#dmThumbnail img").height()){ao=$("#dmThumbnail img").height();}navOffsetX=(am*$("#dmThumbnail img").width())-(an/2);navOffsetY=(al*$("#dmThumbnail img").height())-(ao/2);if(navOffsetX<0){navOffsetX=0;}else{if((navOffsetX+an)>$("#dmThumbnail img").width()){navOffsetX=$("#dmThumbnail img").width()-an;}}if(navOffsetY<0){navOffsetY=0;}else{if((navOffsetY+ao)>$("#dmThumbnail img").height()){navOffsetY=$("#dmThumbnail img").height()-ao;}}$("#dmThumbnail .dmClickNavLayer").bind("click",function(aq){var ap=0;var ar=0;if(!aq){var aq=window.event;}if(aq.pageX||aq.pageY){ap=aq.pageX;ar=aq.pageY;}else{if(aq.clientX||aq.clientY){ap=aq.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;ar=aq.clientY+document.body.scrollTop+document.documentElement.scrollTop;}}i(ap,ar);});$('<div class="dmNavigator"></div>').appendTo("#dmThumbnail").width(an).height(ao).css("z-index","20").css("left",navOffsetX+"px").css("top",navOffsetY+"px").bind("dragstart",function(){$(this).toggleClass("dmDragging");}).bind("drag",function(ap){V(ap);}).bind("dragend",function(){$(this).toggleClass("dmDragging");j();});S=setTimeout(function(){j();},750);}function A(ap,ao){$('<div id="dmMonocleMenu"></div>').insertBefore("#dmMonocle");var al="<div id='dmMonocleHideNavigator' title='Show/Hide Navigator'>Hide Navigator</div>";$(al).appendTo("#dmMonocleMenu").bind("click",function(){T();});var av="<div id='dmMonocleFitWindow' title='Fit Image to Viewer'>Fit Document to Viewer</div>";$(av).appendTo("#dmMonocleMenu").bind("click",function(){b();});var aq="<div id='dmMonocleFitWidth' title='Fit Image to Viewer Width'>Fit Image to Viewer Width</div>";$(aq).appendTo("#dmMonocleMenu").bind("click",function(){ae();});var ar="<div id='dmMonocleMaxRes' title='Maximum Resolution'>Maximum Resolution</div>";$(ar).appendTo("#dmMonocleMenu").bind("click",function(){d();});var at="<div id='dmMonocleRotateCounterclockwise' title='Rotate Counterclockwise'>Rotate Counterclockwise</div>";$(at).appendTo("#dmMonocleMenu").bind("click",function(){ai();});var ax="<div id='dmMonocleRotateClockwise' title='Rotate Clockwise'>Rotate Clockwise</div>";$(ax).appendTo("#dmMonocleMenu").bind("click",function(){w();});var au="<div id='dmMonocleZoomOut' title='Zoom Out'>Zoom Out</div>";$(au).appendTo("#dmMonocleMenu").bind("click",function(){E();});var an="<div id='dmZoomLevelGague' title='Zoom Level'>&nbsp;</div>";$(an).appendTo("#dmMonocleMenu").slider({animate:true,max:100,min:(minZoomLevel*100),change:function(ay,az){K();}});var aw="<div id='dmMonocleZoomIn' title='Zoom In'>Zoom In</div>";$(aw).appendTo("#dmMonocleMenu").bind("click",function(){z();});if($("#dmObjectSearch").width()>0){$("#dmObjectSearch").appendTo("#dmMonocleMenu");}var am="<div class='clear'>&nbsp;</div>";$(am).appendTo("#dmMonocleMenu");}function j(){var ao=parseFloat($(".dmNavigator").css("top"));var an=ao+$(".dmNavigator").height();var am=parseFloat($(".dmNavigator").css("left"));var al=am+$(".dmNavigator").width();$(".collision").each(function(){var au=parseFloat($(this).css("top"));var av=au+$(this).height();var ax=parseFloat($(this).css("left"));var ar=ax+$(this).width();if(((ao>=au&&ao<=av)||(an>=au&&an<=av)||(ao<au&&an>av))&&((am>=ax&&am<=ar)||(al>=ax&&al<=ar)||(am<ax&&al>ar))){var ap=$(this).attr("class").toString().split(" ");var aw=ap[0];var at="#dmMainImageContainer .tile-"+aw;$(this).removeClass("collision");$(at).toggleClass("dmImgTileLoading");var aq=new Image();$(aq).load(function(){$(at).append(this);$(at).toggleClass("dmImgTileLoading");if(($(this).width()<aa[aw]&&$(this).width()>10)||($(this).height()<C[aw]&&$(this).height()>10)){$(this).width(aa[aw]);$(this).height(C[aw]);}}).attr("class","tileimage").attr("src",t[aw]).error(function(){var ay=new Image();$(ay).load(function(){$(at).append(this);$(at).toggleClass("dmImgTileLoading");if(($(this).width()<aa[aw]&&$(this).width()>10)||($(this).height()<C[aw]&&$(this).height()>10)){$(this).width(aa[aw]);$(this).height(C[aw]);}}).attr("class","tileimage").attr("src",Z[aw]);});}});}function l(ao,au,ap,am,ar,al){var an=$("#dmMainImage").position().left;var av=$("#dmMainImage").position().top;$("#feedback").html(an);var at=-1*((an-ap)*(ar/ao));var aq=-1*((av-am)*(al/au));$("div.dmNavigator").css("left",at).css("top",aq);}function G(am){var an=$("div#dmMainImageContainer");var av=$(an).offset().left;var au=$(an).offset().top;var aB=$(an).width();var aC=$(an).height();var aw=$("div#dmMainImage");var aq=$(aw).width();var aA=$(aw).height();tempX=(am.offsetX)-av;tempY=(am.offsetY)-au;var az=tempX+aq;var ax=tempY+aA;var ao=aB-aq;var al=aC-aA;if(tempX<0){tempX=0;}else{if(az>aB){tempX=ao;}}if(tempY<0){tempY=0;}else{if(ax>aC){tempY=al;}}$(aw).css({left:tempX,top:tempY});var ar=($("#dmMainImage").width()-J);var ap=($("#dmMainImage").height()-X);var ay=-1*((tempX-B)*s);var at=-1*((tempY-v)*ak);$("div.dmNavigator").css("left",ay).css("top",at);}function D(ar,ao){var ap=$("#dmMonocle").width();var au=$("#dmMonocle").height();var aw=parseFloat($("#dmMainImage").css("left"));var at=parseFloat($("#dmMainImage").css("top"));if((ar-$("#dmMonocle").offset().left)>(ap/2)){var am=(aw+ap/2)-(ar-$("#dmMonocle").offset().left);if(am<0){am=0;}}else{if((ar-$("#dmMonocle").offset().left)<(ap/2)){am=aw+(ap/2-(ar-$("#dmMonocle").offset().left));if(am>$("#dmMainImage").width()-ap){am=$("#dmMainImage").width()-ap;}}else{if((ar-$("#dmMonocle").offset().left)==(ap/2)){am=aw;}}}if((ao-$("#dmMonocle").offset().top)>(au/2)){var ax=(at+au/2)-(ao-$("#dmMonocle").offset().top);if(ax<0){ax=0;}}else{if((ao-$("#dmMonocle").offset().top)<(au/2)){ax=at+(au/2-(ao-$("#dmMonocle").offset().top));if(ax>$("#dmMainImage").height()-au){ax=$("#dmMainImage").height()-au;}}else{if((ao-$("#dmMonocle").offset().top)==(au/2)){ax=at;}}}var an=($("#dmMainImage").width()-ap);var al=($("#dmMainImage").height()-au);var av=-1*((am-an)*($("#dmThumbnail img").width()/$("#dmMainImage").width()));var aq=-1*((ax-al)*($("#dmThumbnail img").height()/$("#dmMainImage").height()));$("#dmMainImage").animate({top:ax,left:am},"normal","swing");$("div.dmNavigator").animate({top:aq,left:av},"normal","swing",function(){j();});}function V(az){var aw=$("div#dmThumbnail img");var am=$(aw).offset().left;var al=$(aw).offset().top;var au=$(aw).width();var ax=$(aw).height();var aq=$("div.dmNavigator");var ay=$(aq).width();var aB=$(aq).height();tempX=(az.offsetX)-am;tempY=(az.offsetY)-al;var ap=tempX+ay;var an=tempY+aB;var aE=au-ay;var aD=ax-aB;if(tempX<0){tempX=0;}else{if(ap>au){tempX=aE;}}if(tempY<0){tempY=0;}else{if(an>ax){tempY=aD;}}$(aq).css({left:tempX,top:tempY});var av=($(".dmNavigator").offset().left-$("#dmThumbnail").offset().left);var aA=($(".dmNavigator").offset().top-$("#dmThumbnail").offset().top);var at=($("#dmMainImage").width()-J);var ar=($("#dmMainImage").height()-X);var aC=at+-1*(($("#dmMainImage").width()/$("#dmThumbnail img").width())*av);var ao=ar+-1*(($("#dmMainImage").height()/$("#dmThumbnail img").height())*aA);$("#dmMainImage").css("left",aC).css("top",ao);}function i(ar,ao){var av=$("div.dmNavigator").width();var ap=$("div.dmNavigator").height();var aq=(ao-$("#dmThumbnail").offset().top)-(ap/2);var at=(ar-$("#dmThumbnail").offset().left)-(av/2);if((aq+ap)>$("#dmThumbnail img").height()){aq=$("#dmThumbnail img").height()-ap;}else{if(aq<0){aq=0;}}if((at+av)>$("#dmThumbnail img").width()){at=$("#dmThumbnail img").width()-av;}else{if(at<0){at=0;}}var an=($("#dmMainImage").width()-J);var am=($("#dmMainImage").height()-X);var al=an+-1*(($("#dmMainImage").width()/$("#dmThumbnail img").width())*at);var au=am+-1*(($("#dmMainImage").height()/$("#dmThumbnail img").height())*aq);$("#dmMainImage").animate({top:au,left:al},"normal","swing");$("div.dmNavigator").animate({top:aq,left:at},"normal","swing",function(){j();});}function ad(aw,al,aq){if(aq+0.1>1){var au=1;}else{au=Math.round((aq+0.1)*100)/100;f=au;}var ap=$("#dmMonocle").width();var av=$("#dmMonocle").height();var ar=$("#dmMainImage").width()-ap;var ao=$("#dmMainImage").height()-av;var az=parseFloat($("#dmMainImage").css("left"));var at=parseFloat($("#dmMainImage").css("top"));var aB=$("#dmMainImage").width()/aq;var ax=$("#dmMainImage").height()/aq;var aA=((ar-az)+(aw-$("#dmMonocle").offset().left))/(aB*aq);var ay=((ao-at)+(al-$("#dmMonocle").offset().top))/(ax*aq);var an=(U*au*aA);var am=(ab*au*ay);o(au,k,aA,ay);}function z(){if(f+0.05<1){f=Math.round((f+0.05)*100)/100;var ao=parseFloat($(".dmNavigator").css("left"));var am=parseFloat($(".dmNavigator").css("top"));var an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();var al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();$("#dmZoomLevelGague").slider("option","value",(f*100));o(f,k,an,al);}else{if(f+0.1>=1){if(f==1){f=1;}else{f=1;ao=parseFloat($(".dmNavigator").css("left"));am=parseFloat($(".dmNavigator").css("top"));an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();$("#dmZoomLevelGague").slider("option","value",(f*100));o(f,k,an,al);}}}}function E(){if(f-0.05>minZoomLevel){f=Math.round((f-0.05)*100)/100;var ao=parseFloat($(".dmNavigator").css("left"));var am=parseFloat($(".dmNavigator").css("top"));var an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();var al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();$("#dmZoomLevelGague").slider("option","value",(f*100));o(f,k,an,al);}else{if(f-0.05<=minZoomLevel){if(f==minZoomLevel){f=minZoomLevel;}else{f=minZoomLevel;ao=parseFloat($(".dmNavigator").css("left"));am=parseFloat($(".dmNavigator").css("top"));an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();$("#dmZoomLevelGague").slider("option","value",(f*100));o(f,k,an,al);}}}}function K(){f=$("#dmZoomLevelGague").slider("option","value")/100;var ao=parseFloat($(".dmNavigator").css("left"));var am=parseFloat($(".dmNavigator").css("top"));var an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();var al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();o(f,k,an,al);}function d(){f=1;var ao=parseFloat($(".dmNavigator").css("left"));var am=parseFloat($(".dmNavigator").css("top"));var an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();var al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();$("#dmZoomLevelGague").slider("option","value",(f*100));o(f,k,an,al);}function b(){switch(k){case 0:var aq=J/ab;var ap=X/U;break;case 90:aq=J/U;ap=X/ab;break;case 180:aq=J/ab;ap=X/U;break;case 270:aq=J/U;ap=X/ab;break;}if(aq>=ap){f=ap;}else{f=aq;}var ao=parseFloat($(".dmNavigator").css("left"));var am=parseFloat($(".dmNavigator").css("top"));var an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();var al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();$("#dmZoomLevelGague").slider("option","value",(f*100));o(f,k,an,al);}function ae(){switch(k){case 0:f=J/ab;break;case 90:f=J/U;break;case 180:f=J/ab;break;case 270:f=J/U;break;}var ao=parseFloat($(".dmNavigator").css("left"));var am=parseFloat($(".dmNavigator").css("top"));var an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();var al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();$("#dmZoomLevelGague").slider("option","value",(f*100));o(f,k,an,al);}function ai(){switch(k){case 0:k=90;break;case 90:k=180;break;case 180:k=270;break;case 270:k=0;break;}var ao=parseFloat($(".dmNavigator").css("left"));var am=parseFloat($(".dmNavigator").css("top"));var an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();var al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();o(f,k,an,al);}function w(){switch(k){case 0:k=270;break;case 90:k=0;break;case 180:k=90;break;case 270:k=180;break;}var ao=parseFloat($(".dmNavigator").css("left"));var am=parseFloat($(".dmNavigator").css("top"));var an=(ao+($(".dmNavigator").width()/2))/$("#dmThumbnail").width();var al=(am+($(".dmNavigator").height()/2))/$("#dmThumbnail").height();o(f,k,an,al);}function T(){thumbDivTempWidth=(p+10)*-1;thumbDivTempHeight=(F+10)*-1;if(N===true){N=false;$("#dmThumbnail").animate({top:0,left:0},200).animate({top:-30,left:0},200).animate({top:0,left:0},200);}else{N=true;$("#dmThumbnail").animate({top:-60,left:0},200).animate({top:0,left:0},200).animate({top:thumbDivTempHeight,left:0},200);}}o(f,k,0,0);}